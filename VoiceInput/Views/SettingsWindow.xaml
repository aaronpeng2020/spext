<Window x:Class="VoiceInput.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="语音输入法设置" Height="650" Width="550"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 选项卡 -->
        <TabControl Grid.Row="0" Margin="0,0,0,10">
            <!-- 基本设置选项卡 -->
            <TabItem Header="基本设置">
                <StackPanel Margin="10">
                    <!-- API 密钥设置 -->
                    <GroupBox Header="API 设置" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <Label Content="OpenAI API 密钥:" Padding="0,0,0,5"/>
                            <PasswordBox x:Name="ApiKeyBox" Height="26"/>
                            <TextBlock Text="请输入您的 OpenAI API 密钥" 
                                      Foreground="Gray" FontSize="11" Margin="0,5,0,0"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- 快捷键设置 -->
                    <GroupBox Header="快捷键设置" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <Label Content="录音快捷键:" Padding="0,0,0,5"/>
                            <TextBox x:Name="HotkeyBox" Height="26" IsReadOnly="True" Text="F3"/>
                            <TextBlock Text="点击文本框然后按下想要设置的快捷键" 
                                      Foreground="Gray" FontSize="11" Margin="0,5,0,0"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- 启动设置 -->
                    <GroupBox Header="启动设置" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <CheckBox x:Name="AutoStartCheckBox" Content="开机自动启动" IsChecked="True" VerticalAlignment="Center"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- 录音设置 -->
                    <GroupBox Header="录音设置" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <CheckBox x:Name="MuteWhileRecordingCheckBox" Content="录音时暂停其他声音" IsChecked="True" VerticalAlignment="Center"/>
                            <TextBlock Text="启用后，按下录音键时会自动暂停系统中其他声音" 
                                      Foreground="Gray" FontSize="11" Margin="0,5,0,0"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- 测试功能 -->
                    <GroupBox Header="测试">
                        <StackPanel Margin="10">
                            <Button x:Name="TestButton" Content="测试语音识别" Width="130" Height="32" Click="TestButton_Click"/>
                            <TextBlock x:Name="TestResultText" Text="" Foreground="Gray" FontSize="11" Margin="0,8,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </GroupBox>
                </StackPanel>
            </TabItem>

            <!-- 代理设置选项卡 -->
            <TabItem Header="代理设置">
                <StackPanel Margin="10">
                    <!-- 启用代理 -->
                    <CheckBox x:Name="ProxyEnabledCheckBox" Content="启用HTTP代理" Margin="0,0,0,15" 
                              Checked="ProxyEnabledCheckBox_Changed" Unchecked="ProxyEnabledCheckBox_Changed"/>

                    <!-- 代理服务器设置 -->
                    <GroupBox Header="代理服务器" Margin="0,0,0,15" x:Name="ProxyServerGroup">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Label Content="地址:" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                            <TextBox x:Name="ProxyAddressBox" Grid.Row="0" Grid.Column="1" Height="26" Margin="5,0"/>
                            <Label Content="端口:" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            <TextBox x:Name="ProxyPortBox" Grid.Row="0" Grid.Column="3" Height="26" Margin="5,0,0,0"/>
                            
                            <TextBlock Text="例如: proxy.example.com 或 192.168.1.100" 
                                      Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="4"
                                      Foreground="Gray" FontSize="11" Margin="0,5,0,0"/>
                        </Grid>
                    </GroupBox>

                    <!-- 代理认证设置 -->
                    <GroupBox Header="代理认证（可选）" x:Name="ProxyAuthGroup">
                        <StackPanel Margin="10">
                            <CheckBox x:Name="ProxyAuthCheckBox" Content="代理需要身份验证" Margin="0,0,0,10"/>
                            
                            <Grid x:Name="ProxyAuthGrid" Visibility="Collapsed">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Label Content="用户名:" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox x:Name="ProxyUsernameBox" Grid.Row="0" Grid.Column="1" Height="26" Margin="5,2"/>
                                
                                <Label Content="密码:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                                <PasswordBox x:Name="ProxyPasswordBox" Grid.Row="1" Grid.Column="1" Height="26" Margin="5,2"/>
                            </Grid>
                        </StackPanel>
                    </GroupBox>

                    <!-- 测试代理连接 -->
                    <GroupBox Header="测试代理" Margin="0,15,0,0">
                        <StackPanel Margin="10">
                            <Button x:Name="TestProxyButton" Content="测试代理连接" Width="130" Height="32" Click="TestProxyButton_Click"/>
                            <TextBlock x:Name="ProxyTestResultText" Text="" Foreground="Gray" FontSize="11" Margin="0,8,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </GroupBox>
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- 按钮 -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="SaveButton" Content="保存" Width="80" Height="30" Margin="0,0,10,0" Click="SaveButton_Click"/>
            <Button x:Name="CancelButton" Content="取消" Width="80" Height="30" Click="CancelButton_Click"/>
        </StackPanel>
    </Grid>
</Window>